// --- üß© –ó–∞–≤–¥–∞–Ω–Ω—è 1: –ö–æ–Ω—Ç–µ–∫—Å—Ç —É –º–µ—Ç–æ–¥–∞—Ö –æ–±'—î–∫—Ç–∞ ---

console.log("--- –ó–∞–≤–¥–∞–Ω–Ω—è 1 ---");

const user = {
  name: "–ü–µ—Ç—Ä–æ",
  age: 30,
  greet() {
    console.log(`–ü—Ä–∏–≤—ñ—Ç, –º–µ–Ω–µ –∑–≤–∞—Ç–∏ ${this.name} —ñ –º–µ–Ω—ñ ${this.age} —Ä–æ–∫—ñ–≤.`);
  },
};

user.greet(); // –ü—Ä–∞—Ü—é—î –∫–æ—Ä–µ–∫—Ç–Ω–æ, this –≤–∫–∞–∑—É—î –Ω–∞ user

// –°—Ç–≤–æ—Ä—é—î–º–æ –∑–º—ñ–Ω–Ω—É —ñ –ø–µ—Ä–µ–¥–∞—î–º–æ –≤ –Ω–µ—ó –º–µ—Ç–æ–¥
const greetUser = user.greet;

// –í–∏–∫–ª–∏–∫–∞—î–º–æ greetUser()
console.log("–í–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ—ó –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É:");
// greetUser(); // –ü–æ–º–∏–ª–∫–∞ –∞–±–æ undefined, –±–æ this –≤—Ç—Ä–∞—á–µ–Ω–æ

// –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ bind –¥–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É
const boundGreetUser = greetUser.bind(user);
console.log("–í–∏–∫–ª–∏–∫ —Ñ—É–Ω–∫—Ü—ñ—ó –∑ –ø—Ä–∏–≤'—è–∑–∞–Ω–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º:");
boundGreetUser(); // –ü—Ä–∞—Ü—é—î, –±–æ this —Ç–µ–ø–µ—Ä –∑–∞–≤–∂–¥–∏ = user

// --- üß© –ó–∞–≤–¥–∞–Ω–Ω—è 2: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `call` ---

console.log("\n--- –ó–∞–≤–¥–∞–Ω–Ω—è 2 ---");

function introduce() {
  console.log(`–ó–Ω–∞–π–æ–º—Ç–µ—Å—å, —Ü–µ ${this.name}. –ô–æ–º—É ${this.age} —Ä–æ–∫—ñ–≤.`);
}

const person = {
  name: "–Ü–≤–∞–Ω",
  age: 42,
};

// –í–∏–∫–ª–∏–∫–∞—î–º–æ introduce –∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º person –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é call
introduce.call(person);

// --- üß© –ó–∞–≤–¥–∞–Ω–Ω—è 3: –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è `apply` ---

console.log("\n--- –ó–∞–≤–¥–∞–Ω–Ω—è 3 ---");

function showFullNameAndCity(surname, city) {
  console.log(`–ü–æ–≤–Ω–µ —ñ–º'—è: ${this.name} ${surname}, –º—ñ—Å—Ç–æ: ${city}.`);
}

const userForApply = {
  name: "–ú–∞—Ä—ñ—è",
};

// –í–∏–∫–ª–∏–∫–∞—î–º–æ showFullNameAndCity —á–µ—Ä–µ–∑ apply —Ç–∞ –ø–µ—Ä–µ–¥–∞—î–º–æ –º–∞—Å–∏–≤ –∞—Ä–≥—É–º–µ–Ω—Ç—ñ–≤
showFullNameAndCity.apply(userForApply, ["–Ü–≤–∞–Ω–µ–Ω–∫–æ", "–ö–∏—ó–≤"]);

// --- üß© –ó–∞–≤–¥–∞–Ω–Ω—è 4: `bind` –¥–ª—è —á–∞—Å—Ç–∫–æ–≤–æ–≥–æ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è ---

console.log("\n--- –ó–∞–≤–¥–∞–Ω–Ω—è 4 ---");

function multiply(a, b) {
  return a * b;
}

// –°—Ç–≤–æ—Ä—é—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é double, –¥–µ –ø–µ—Ä—à–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç (a) –∑–∞–≤–∂–¥–∏ –±—É–¥–µ 2
const double = multiply.bind(null, 2); // null, –±–æ –∫–æ–Ω—Ç–µ–∫—Å—Ç this –Ω–µ –≤–∞–∂–ª–∏–≤–∏–π

// –°—Ç–≤–æ—Ä—é—î–º–æ —Ñ—É–Ω–∫—Ü—ñ—é triple, –¥–µ –ø–µ—Ä—à–∏–π –∞—Ä–≥—É–º–µ–Ω—Ç (a) –∑–∞–≤–∂–¥–∏ –±—É–¥–µ 3
const triple = multiply.bind(null, 3);

// –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Ä–æ–±–æ—Ç—É —Ñ—É–Ω–∫—Ü—ñ–π
console.log("–ü–æ–¥–≤–æ—î–Ω–µ —á–∏—Å–ª–æ 5:", double(5)); // 10
console.log("–ü–æ—Ç—Ä–æ—î–Ω–µ —á–∏—Å–ª–æ 5:", triple(5)); // 15
console.log("–ü–æ–¥–≤–æ—î–Ω–µ —á–∏—Å–ª–æ 10:", double(10)); // 20

// --- üß© –ó–∞–≤–¥–∞–Ω–Ω—è 5: –ö–æ–Ω—Ç–µ–∫—Å—Ç —Ç–∞ `bind` ---

console.log("\n--- –ó–∞–≤–¥–∞–Ω–Ω—è 5 ---");

const counter = {
  count: 0,
  increment() {
    this.count++;
    console.log("Count in increment:", this.count);
  },
  decrement() {
    this.count--;
    console.log("Count in decrement:", this.count);
  },
  show() {
    console.log(`–ü–æ—Ç–æ—á–Ω–∏–π —Ä–∞—Ö—É–Ω–æ–∫: ${this.count}`);
  },
};

// –í–∏–∫–ª–∏–∫–∞—î–º–æ increment –∫—ñ–ª—å–∫–∞ —Ä–∞–∑—ñ–≤
counter.increment(); // 1
counter.increment(); // 2
counter.show(); // –ü–æ—Ç–æ—á–Ω–∏–π —Ä–∞—Ö—É–Ω–æ–∫: 2

// –ü–µ—Ä–µ–¥–∞—î–º–æ –º–µ—Ç–æ–¥ increment —É –∑–º—ñ–Ω–Ω—É
const inc = counter.increment;

// –í–∏–∫–ª–∏–∫–∞—î–º–æ inc()
console.log("–í–∏–∫–ª–∏–∫ inc() –±–µ–∑ –∫–æ–Ω—Ç–µ–∫—Å—Ç—É:");
// inc(); // –ù–µ –ø—Ä–∞—Ü—é—î —è–∫ –æ—á—ñ–∫—É—î—Ç—å—Å—è. `this` –±—É–¥–µ `window` –∞–±–æ `undefined`,
         // —Ç–æ–º—É `this.count` –±—É–¥–µ `undefined`. `undefined++` –¥–∞—î `NaN`.

// –í–∏–ø—Ä–∞–≤–ª—è—î–º–æ, –ø—Ä–∏–≤'—è–∑–∞–≤—à–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç
const boundInc = counter.increment.bind(counter);
console.log("–í–∏–∫–ª–∏–∫ inc() –∑ –ø—Ä–∏–≤'—è–∑–∞–Ω–∏–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º:");
boundInc(); // 3 (–ø—Ä–æ–¥–æ–≤–∂—É—î —Ä–∞—Ö—É–≤–∞—Ç–∏)
boundInc(); // 4

// –ü–µ—Ä–µ–≤—ñ—Ä—è—î–º–æ —Ñ—ñ–Ω–∞–ª—å–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç
counter.show(); // –ü–æ—Ç–æ—á–Ω–∏–π —Ä–∞—Ö—É–Ω–æ–∫: 4